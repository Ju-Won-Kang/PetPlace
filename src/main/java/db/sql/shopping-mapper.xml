<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="selectShoppingListCount">
		SELECT COUNT(*) AS "COUNT"
		  FROM PRODUCT
		 WHERE STATUS = 'Y'
	</entry>
	<entry key="selectShoppingList">
		SELECT *
		FROM(SELECT ROWNUM RNUM, A.*
		     FROM (SELECT PRODUCT_NO,
		                  PRODUCT_NAME,
		                  PRICE
		              FROM PRODUCT 
		             WHERE STATUS = 'Y'
		             ORDER BY PRODUCT_NO DESC) A)
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	
	<entry key="selectAttachmentProduct">   
		SELECT PRODUCT_NO,
			   PRODUCT_NAME,
			   FILE_PATH || CHANGE_NAME AS "TITLE_IMG",
			   PRICE,
			   STAR,
			   R.COUNT(*),
			   PRODUCT_CATEGORY
		  FROM PRODUCT P
		  JOIN REVIEW R USING(PRODUCT_NO) 
		  JOIN ATTACHMENT_PRODUCT ON(PRODUCT_NO = REF_PNO)
		 WHERE PRODUCT_NO = ?
		   AND P.STATUS = 'Y'
		   AND FILE_LEVEL = 1   
	</entry>
	
	<entry key="selectDetailProduct">
		SELECT PRODUCT_NO,
		       PRODUCT_NAME,
		       PRICE,
		       FILE_NO,
		       FILE_PATH,
		       COUNT(REVIEW_NO) AS REVIEW_COUNT, -- 리뷰 개수를 집계
		       AVG(STAR) AS AVG_STAR,            -- 평균 별점 (선택 사항)
		       COMPANY,
		       INGREDIENT,
		       ORIGIN,
		       PRODUCT_WEIGHT,
		       KCAL
		  FROM PRODUCT
		  LEFT JOIN REVIEW R ON P.PRODUCT_NO = R.PRODUCT_NO
		  JOIN ATTACHMENT_PRODUCT A ON P.PRODUCT_NO = A.REF_PNO
		 WHERE PRODUCT_NO = ? 
		   AND P.STATUS = 'Y'
		   AND A.FILE_LEVEL = 1
		 GROUP BY PRODUCT_NO, PRODUCT_NAME, PRICE, A.FILE_NO, A.FILE_PATH, COMPANY, INGREDIENT, ORIGIN, PRODUCT_WEIGHT, KCAL;
	</entry>
	
	
	
</properties>